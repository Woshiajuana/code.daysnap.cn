# 什么是层叠上下文？

层叠上下文(`stacking context`)，是 `HTML` 中的一个三维的概念。每一个盒模型的位置是三维的，分别是平面画布上的 x 轴，y 轴以及表示层叠的 z 轴。层叠上下文即元素在某个层级上 z 轴方向的排列关系。

## 特性

层叠上下文元素有以下特性：

- 层叠上下文可以阻断元素的混合模式
- 层叠上下文可以嵌套，内部层叠上下文及其所有子元素均受制于外部的“层叠上下文”
- 每个层叠上下文和兄弟元素独立，也就是说，当进行层叠变化或渲染的时候，只需要考虑后代元素
- 每个层叠上下文是自成体系的，当元素发生层叠的时候，整个元素被认为是在父层叠上下文的层叠顺序中

## 层叠顺序

![层叠顺序](/assets/1705562830133.png)

- 属于同一层叠上下文的同级元素比较
- 当层叠上下文属于某一层级时，其内的层叠上下文都属于对应层级

## 如何产生层叠上下文

- `HTML` 根元素是跟层叠上下文
- `position` 值为非 `static` 且 `z-index` 值不为 `auto`。
- `transform` 不为 `none` 的元素
- `opacity` 小于 1 的元素

## 参考

- [层叠上下文](https://zhuanlan.zhihu.com/p/489893280)
