<!--index.wxml-->
<view class="wrap">
    <wxs src="../../wxs/filter.wxs" module="filter" />

    <image class="bg" mode="widthFix" src="../../assets/images/box-bg.jpg"></image>

    <view class="header-section">
        <text class="header-title">血糖日志</text>
        <text class="header-sub-title">——Blood sugar log</text>
    </view>
    <scroll-view
        class="record-section"
        bindscrolltolower="handleScrollToLower"
        scroll-y>
        <view class="record-item"
              wx:for="{{arrList}}"
              wx:key="{{index}}">
            <view class="record-item-head">
                <text>记录时间：{{item.TestDate && filter.filterTime(item.TestDate)}} {{item.TestTime}}</text>
                <text>管家记录</text>
            </view>
            <view class="record-item-content">
                <view class="record-item-cell">
                    <text class="record-label">{{base$.arrStage[item.TimeStep - 1]}}</text>
                    <text class="record-value">{{item.Bloodsugar && filter.filterSugar(item.Bloodsugar)}}</text>
                    <text class="record-unit">mmol/L</text>
                </view>
                <view class="record-item-cell">
                    <text class="record-label">血糖状态</text>
                    <text class="record-value">{{base$.arrGls[item.Gls] || '---'}}</text>
                </view>
            </view>
        </view>

        <view class="loading">
            <text>{{Count === 0 ? '暂无日志数据' : Count <= arrList.length ? '没有更多了...' : '正在加载中...'}}</text>
        </view>
    </scroll-view>
</view>
